---
layout: default
title: Документация к Прототипу Cubetto
language: Русский
category: language
---

<br>

<div id="content" markdown="1">
## 0. Что содержится в этом документе

![primo play set]({{ site.baseurl }}images/photo/maker-guide.jpg)
Этот документ собирает и организует всю информацию, имеющую отношение к созданию Прототипа Primo. Вы можете найти больше информации о проекте на [primo.io](http://primo.io) сайте.

<h2>
<a href="#" id="translate-title">
    Как перевести этот документ
</a>
</h2>


<div markdown="1" id="translate">

Если Вы хотите перевести эту страницу на ваш язык, вы можете воспользоваться несколькими вариантами:

1. **очень простой, не автоматизированный** Скопируйте и вставьте эту страницу в Ваш текстовый редактор, переведите её, затем отправьте по почте на [play@primo.io](mailto:play@primo.io)

2. **средний, полуавтоматизированный** Создайте аккаунт на [GitHub](http://github.com), затем откройте [репозиторий этой страницы](https://github.com/primo-io/prototype-documentation/blob/gh-pages/index.md) и кликните на 'EDIT', в верхней части экрана в меню:
![photo]({{ site.baseurl }}images/screenshots/edit-1.jpg)
Затем поместите содержимое в Ваше текстовый редактор, где вам будет удобно модифицировать код. Страница написана на очень лёгком и понятном [языке разметки](http://daringfireball.net/projects/markdown/syntax).
![photo]({{ site.baseurl }}images/screenshots/edit-2.jpg)
Не надо изменять код, просто скопируйте и вставьте весь текст в установленный у вас текстовый редактор, затем переведите текстовые части на ваш язык, не трогая скобки и HTML-части. Сохраните текст и затем пришлите его нам на [play@primo.io](mailto:play@primo.io)

3. **усложнённый, полная автоматизация** Это вариант чуть труднее, но ничего сложного на самом деле нет. Если вы не  были знакомы с GitHub, то у вас есть шанс научиться чему-нибудь новому. :) <br>
Если вы Git уже знакомы, то зайтиде в основной репозиторий и сделайте его ветку, все переводы находятся в папке "languages". Чтобы перевести страницу, просто скопируйте в ту же папку файл с исходным языком (например, "english.md"), а затем замените название на язык назначения(например, "spamish.md"). Поменяйте в заголовке страницы строки 'title' (на название страницы на вашем языке) и 'language' (название языка с заглавной буквы), затем переведите оставшуюся часть документа. Закончив, сделайте запрос на добавление нового файла с переводом в папку ("pull request"), и он автоматически добавится в меню.<br><br>
Шаги, описанные выше, подробнее:

  1. Создайте аккаунт GitHub.
  2. Скачайте клиент GitHub ([Mac](http://mac.github.com/), [Windows](http://windows.github.com/))
  3. Если вы ранее не использовали GitHub, необходимо ввести ваши логин и пароль при запуске программы.
  4. Перейдите в [репозиторий этой документации](https://github.com/primo-io/prototype-documentation)
  5. Нажмите кнопку "Fork" (ветка) в верхнем правом углу, чтобы скопировать этот репозиторий в ваш аккаунт.
  6. Зайдите в свой аккаунт GitHub, откройте страницу сдублированного репозитория и кликните на кнопку "Clone in Desktop" ("Клонировать на компьютер") справа. Автоматически откроется приложение GitHub, запросив, куда именно сохранить папку на жёстком диске.
  7. После выбора пути для сохранения, нажмите на "clone" (клонировать).
  8. После загрузки файлов перейдите в локальную папку на компьютере, куда сохранился репозиторий.
  9. Откройте папку 'languages', где расположены все переводы. Выберите исходный язык ( например, "english.md"), затем скопируйте файл в ту же папку и переименуйте его в название конечного языка перевода (например, "spanish.md" ).
  10. Откройте только что созданный файл, измените строки 'title' (на заголовок на вашем языке) и 'language' (название языка перевода с заглавной буквы), после переведите оставшуюся часть, не трогая скобки и HTML-теги.
  11. После того, как вы закончите перевод, необходимо перезалить файл на GitHub. Запустите клиент GitHub и дважды нажмите на репозитории. В левой части нажмите на "Changes" ("Изменения"). Должно появиться предупреждение: "Uncommitted Changes" ("Несогласованные изменения").
  12. Как-нибудь назовите ваши изменения, например: "русский перевод", затем нажмите на "commit" и на кнопку "sync" (загрузить и синхронизировать).
  13. Перейдите в профиль GitHub на страницу дублированного репозитория. В папке 'languages' должна была появиться только что созданная страница. Наверху есть зелёная кнопка с двумя стрелочками, оставьте запрос, нажав на неё. (см. картинку ниже)
  ![photo]({{ site.baseurl }}images/screenshots/pull-1.jpg)

  14. Нажмите на "Create Pull Request".

  ![photo]({{ site.baseurl }}images/screenshots/pull-2.jpg)

  15. Напишите комментарий к запросу, и всё! Теперь нам остаётся лишь одобрить запрос.
</div>
<br>

## 1. Что такое Primo

![Игровой набор Primo]({{ site.baseurl }}images/photo/primo.jpg)

Primo - развивающее пособие, созданное для знакомства маленьких детей (от 3 до 7) с логикой программирования и не требующее грамотности. Цель игры - направить маленького робота по имени Кубетто обратно в его дом. Для достижения цели дети должны запрограммировать робота, используя ограниченный набор команд: вперёд, налево, направо и функцию. Первые три понятны интуитивно, последняя же вызывает подпрограмму - последовательность команд, объединённых в одну.

<div class="videoWrapper">
  <iframe src="//player.vimeo.com/video/82620072" frameborder="0" webkitallowfullscreen="true" mozallowfullscreen="true"  allowfullscreen="true">        
    </iframe>
</div>

## 2. Исследования

Обучение детей программированию является широко обсуждаемой темой. Известны подходы к обучению детей в возрасте от восьми лет, но обучение детей младшего возраста изучено слабо, способов же работы без экрана или не требующих умения читать, просто нет. Растёт число приложений для планшетов и компьютеров, работающих в связке  с  роботами, но все они требуют наличия экрана, в отличие от игрового набора Primo.

Дерево было выбрано в качестве основного материала, в первую очередь, потому что это природный материал; оно тёплое на ощупь и издаёт приятный звук. Вторая причина - культурная. Наблюдая за играми в детских садах Швейцарии (где разрабатывался набор), выяснилось, что игрушки, которые нравятся детям, все сделаны из дерева. Деревянные игрушки очень долговечные, и на них видно царапины и отметины - следы прежнего использования детьми, разжигающий у других малышей интерес. Это материал с памятью. Дерево также было выбрано в качестве материала, потому что оно резко контрастирует с высокими технологиями. Конечно, внутри Primo есть электронная схема, но нам хотелось сохранить "чудо" познания, скрыв от детей сложность игрового набора.
<img class="float" src="{{ site.baseurl }}images/photo/logo-turtle.jpg">

Идея Primo во многом вдохновлена работой Сеймура Пейперта, математика, ставшего в шестидесятые  годы вместе с Марвином Мински основателем Лаборатории Искусственного Интеллекта Массачусетского Технологического Института (если вас заинтересовало, прочтите [Мозговой штурм](http://www.amazon.co.uk/Mindstorms-Children-Computers-Powerful-Ideas/dp/0465046746/ref=sr_1_1?ie=UTF8&qid=1393675158&sr=8-1&keywords=mindstorms+papert), его самую известную книгу). Паперт руководил командой, создавшей [LOGO](http://en.wikipedia.org/wiki/Logo_(programming_language)), вероятно, наиболее используемый и долгоживущий язык для обучения детей программированию. Целью Сеймура Пейперта было не просто учить писать код, но и помочь детям найти для себя свой собственный путь для решения задач. Primo может быть рассмотрен как упрощение языка LOGO и механической черепашки, которая в нём двигалась. Мы сократили команды для робота, чтобы избежать любое использование букв и цифр.

Первый Прототип был собран в УПНИШ (Университете прикладных наук итальянской Швейцарии, г. Лугано) Маттео Логлио (соучредителем и проектировщиком Primo.io ) во время [MAInD - Мастер-показов передовых исследований в области интерактивного дизайна](http://www.maind.supsi.ch/). У Маттео был опыт в дизайне продуктов, и после изучения основ Arduino и программирования для создания прототипа он начал искать технические решения, которые были бы доступны для новичка, что и привело к разработке первых аналогов Primo. Трудностей было две: сделать машинку-робота с нуля и создать плату управления, которая смогла бы распознать различные команды.

Первая трудность была преодолена с помощью [платы Oh_Oh](http://david.cuartielles.com/w/Maquila2/Ohoh) Давида Квартьеля, одного из разработчиков Arduino, читавшего лекции в УПНИШ. Робот Oh_Oh - открытый проект, исходники которого можно найти по ссылке ниже. За основу была взята машинка под управлением Arduino, добавлен был лишь модуль радиосвязи XBee.

Второй вопрос заключался в разработке надёжного способа распознавания блоков. Решение было почерпнуто из проекта [CIID](http://ciid.dk/) под названием  ["Barcode Piano"](http://ciid.dk/education/portfolio/idp11/courses/physical-computing/projects/barcode-piano/).

<div class="videoWrapper">
	<iframe src="//player.vimeo.com/video/19704918" frameborder="0" webkitallowfullscreen="true" mozallowfullscreen="true"  allowfullscreen="true">    
    </iframe>
</div>

Принцип - в использовании различных блоков, которые могут быть распознаны платой по их сопротивлению.  Это обычный делитель напряжения, определяющий сопротивление при помощи аналоговых входов Arduino. Метод очень простой, но он достаточно эффективен для Прототипа.

Если говорить о дизайне, то некоторые возможности требовали тестирования; на настоящий момент вы видите результат нескольких переработок.

"Змейка" и "зиг-заг" как типовые наборы команд были выбраны, чтобы избежать необходимости грамотности ребёнка.

![слева направо]({{ site.baseurl }}images/illustrations/left-to-right.jpg)

D-образные блоки могут быть вставлены только одним способом, чтобы заданная траектория и непосредственно направление движения автомобильчика совпадали. Для этого можно использовать различные формы, но мы выбрали "D"  как "ориентированный круг" и потому, что так блоки напоминают разъёмы на коммутационных платах.

![блоки команд]({{ site.baseurl }}images/photo/instruction-blocks.jpg)

Внешний вид командных блоков до сих пор тестируется. На настоящий момент дизайн проявляет себя достаточно хорошо, дети легко схватывают смысл команд, сложности возникают лишь при знакомстве с левой и правой стороной блока. И это хорошо, ведь концепция "право" и "лево", как правило, для детей младшего возраста является совершенно новой. Сейчас мы тестируем и другие формы блоков, чтобы сделать их ещё понятнее.

<div class="videoWrapper">
	<iframe src="//player.vimeo.com/video/50570097" frameborder="0" webkitallowfullscreen="true" mozallowfullscreen="true"  allowfullscreen="true">

    </iframe>
</div>

Сначала робот был игрушечной машинкой. Форма достаточно сложная, её было долго изготавливать, т.к. она вырезалась лазером слой за слоем, они склеивались, шлифовались более часа. Также автомобильчик обладал одним  важным свойством - машинки ориентированы прежде всего на мальчиков. Мы хотели избежать осуждений и критики от производителей развивающих игрушек, будто бы наш прототип делается исключительно для мальчиков. Хотелось остаться нейтральными, не делать игрушку специально для мальчиков или девочек, поэтому решили использовать тривиальную геометрическую форму - коробочку.

Коробочке дали имя, индивидуальность и лицо с улыбкой, что сделало её ещё более привлекательной для детей. Робота зовут Кубетто (маленький кубик по-итальянски), также возникла идея, что он будет базовым компонентом, который можно расширить или переоборудовать позднее.

![Кубетто]({{ site.baseurl }}images/photo/cubetto.jpg)

## 3. Начнём

### 3.1 Основы

Primo состоит из трёх частей: плата управления, Кубетто и набор командных блоков. Дети  вставляют блоки в специальные отверстия на плате управления, тем самым выстраивая последовательность команд (программу), которую Кубетто выполняет.

Командные блоки могут быть четырёх типов, т. е. можно использовать резисторы четырёх номиналов, по возможности сильно отличающихся друг от друга.

Блоки вставляются в отверстия в плате управления, где определяется их сопротивление. После этого значения обрабатываются в строку, которая отправляется Кубетто при помощи двух радиомодулей XBee. Кубетто последовательно выполняет команды, одну за другой.

"Мозг" Прототипа состоит из двух плат Arduino - UNO  для Кубетто (также подходят Leonardo или Duemilanove) и Mega для платы управления, где требуются 16 аналоговых входов.

### 3.2 Электроника

### Необходимые инструменты

* Паяльник
* Припой
* Провода
* Пистолет для горячего клея
* Клей для дерева
* Медная полоса шириной 5 мм

### Материалы (цены указаны в евро)

Кубетто ~ 88 €

* Arduino UNO (или Leonardo) - 20 € : [Магазин Arduino](http://store.arduino.cc/index.php?main_page=product_info&cPath=11&products_id=195#.UxC5nfTV_bA)
* Беспроводной модуль управления Arduino Proto Wireless Shield - 14.90 € : [Магазин Arduino](http://store.arduino.cc/index.php?main_page=product_info&cPath=37_5&products_id=145#.UxC53vTV_bA)
* Электрический блок управления двигателем SN754410 (контроллер) - 3.90 € : [Магазин Arduino](http://store.arduino.cc/index.php?main_page=product_info&cPath=6_33&products_id=153#.UxC5-_TV_bB)
* XBee (серии 1 или 2, особой разницы нет) : 23.90 € - [Магазин Arduino](http://store.arduino.cc/index.php?main_page=product_info&cPath=37_38&products_id=292#.UxC6cvTV_bA)
* Колёсики SolarBotics x 2 : 4.74 € - [Магазин Solarbotics](https://solarbotics.com/product/gmpw/)
* Редукторы SolarBotics GM3 x 2 : 8.36 € - [Магазин Solarbotics](https://solarbotics.com/product/gm3/)
* 2 ролика : 5.79 € - [Магазин Solarbotics](https://solarbotics.com/product/23160/)
* CNY70 x 2 : 1 € - [Mouser](http://uk.mouser.com/ProductDetail/Vishay/CNY70/?qs=%2fha2pyFaduj8YpDhNNtXszq4w32cl%2fAjUjdOwQUvJUM%3d)
* (необязательно) Держатель для аккумулятора : 4 € - [Магазин Solarbotics](https://solarbotics.com/product/bholdaa_4_cell/)
* (необязательно) 4 x аккумулятора

Плата управления ~ 88 € (точная копия нашего)

* Arduino Mega 2560 : 39.00 € - [Магазин Arduino](http://store.arduino.cc/index.php?main_page=product_info&cPath=11&products_id=196#.UxC_gPTV_bA)
* Беспроводной модуль управления Arduino Proto Wireless Shield : 14.90 - [Магазин Arduino](http://store.arduino.cc/index.php?main_page=product_info&cPath=37_5&products_id=145#.UxC53vTV_bA)
* XBee (серии 1 или 2, особой разницы нет) : 23.90 € - [Магазин Arduino](http://store.arduino.cc/index.php?main_page=product_info&cPath=37_38&products_id=292#.UxC6cvTV_bA)
* 16 5-миллиметровых красных светодиодов: 1 € - [Mouser](http://uk.mouser.com/ProductDetail/Lite-On/LTL-4223/?Lite-On/LTL-4223/&qs=sGAEpiMZZMusoohG2hS%252b15J8d1kHl%252bvkJpzS4atZNEA=)
* 16 резисторов 220 Ω : 0.16 € - [Mouser](http://uk.mouser.com/ProductDetail/Xicon/291-220-RC/?qs=sGAEpiMZZMu61qfTUdNhG%2f1uGo5nxyCVqn6ChOCvUEE%3d)
* 16 резисторов 10K Ω : 0.16 € - [Mouser](http://uk.mouser.com/ProductDetail/Xicon/291-10K-RC/?qs=sGAEpiMZZMu61qfTUdNhG6xwTrVwTvbz8PPav3aExs8%3d)
* 1 кнопка : 1 €
* 50 однорядных штырьковых разъёмов (папа) : 1 €
* 16 двухрядных штырьковых разъёмов (папа) : 0.50 € - [Магазин Arduino](http://store.arduino.cc/index.php?main_page=product_info&cPath=6_32&products_id=294#.UxC_3fTV_bA)
* 50 однорядных гнездовых разъёмов (мама) : 1 € - [Магазин Arduino](http://store.arduino.cc/index.php?main_page=product_info&cPath=6_32&products_id=188#.UxDAAfTV_bA)
* 16 магнитов ø 4мм h 3мм : 3.5 € - [Supermagnete](http://www.supermagnete.ch/eng/S-04-03-N)

Командные блоки ~ 4 €

* 4  резистора 4.7K Ω: 0.04 € - [Mouser](http://uk.mouser.com/ProductDetail/Xicon/291-47K-RC/?qs=sGAEpiMZZMu61qfTUdNhG%2fbdyz6pU6a%252bvHlD5kaZWgo%3d)
* 4  резистора 100K Ω : 0.04 € - [Mouser](http://uk.mouser.com/ProductDetail/Xicon/291-100K-RC/?qs=sGAEpiMZZMu61qfTUdNhG81NIhcRRUJQxII5Nsctha8%3d)
* 4  резистора 220 Ω: 0.04 € - [Mouser](http://uk.mouser.com/ProductDetail/Xicon/291-220-RC/?qs=sGAEpiMZZMu61qfTUdNhG%2f1uGo5nxyCVqn6ChOCvUEE%3d)
* 4  резистора 10K Ω: 0.04 € - [Mouser](http://uk.mouser.com/ProductDetail/Xicon/291-10K-RC/?qs=sGAEpiMZZMu61qfTUdNhG6xwTrVwTvbz8PPav3aExs8%3d)
* 16 магнитов ø 4мм h 3мм : 3.5 € - [Supermagnete](http://www.supermagnete.ch/eng/S-04-03-N)

### 3.3 Питание

Кубетто и (необязательно) плата управления питаются от батареек. Для Прототипа можно использовать LiPo-аккумулятор или обычные пальчиковые батарейки (AA) на ваш выбор. Мы пробовали и с тем, и  с другим:  литий-полимерные аккумуляторы хороши, но нужно дополнительное оборудование, если его нет - рекомендуем использовать AA. Только не забывайте, пальчиковые батарейки быстро садятся, поэтому лучше было бы использовать перезаряжаемые, например, никель-марганцевые аккумуляторы.

### 3.4 Дизайн Прототипа

Детали корпуса вырезаны лазером из листов 4-миллиметровой фанеры, в основном, и из одного листа толщиной 1 мм. Вы можете разрезать панели с помощью специализированных сервисов, например через онлайн-заказ в Ponoko, или в  ближайшем центре FabLab (примечание пер.: в России есть аналогичный сервис "Пролаб"). Первый образец был вырезан в [FabLab в Лугано](http://fablab.supsi.ch/), затем для моделирования пользовались услугами [FabLab в Торино](http://fablabtorino.org/), где до сих пор проживает часть команды разработчиков Primo.

Сборка Кубетто и платы управления является процессом кропотливым, но довольно простым, потому что их оболочки - обычные коробки. Сложнее всего, на самом деле, будет с командными блоками. Они сделаны из двух 4-миллиметровых слоёв фанеры с магнитами и запаянными резисторами внутри.

## 4. Сборка Прототипа

### [Скачать файлы с разметкой для лазера](files/primo-prototype-laser.zip)

### 4.1 Плата управления

Чтобы вырезать плату управления, надо отправить лазеру два файла: interface-board-4mm.dxf и interface-board-1mm.dxf (первый из них для фанеры толщиной 4мм и второй для фанеры в 1мм). Как видно в файлах, чтобы процедура сборки была легче, детали пронумерованы. Цифры находятся на отдельном слое, так что их можно скрыть или вовсе удалить, прежде чем отправить файл лазеру. Рекомендуем поменять размер отверстия под используемую вами кнопку.

Сначала склейте вместе части 3 и 4, выровнив их шурупами или винтами в отверстиях по углам, оставьте заготовку высыхать на ночь.

Затем возьмите медную ленту и отрежьте 32 куска по 70мм длиной каждый и проденьте их в прямоугольные отверстия в только что склеенной части корпуса, приэтом куски должны торчать не менее 30мм с каждой стороны. Закончив, можно наклеить верхний слой платы управления. Ниже представлен правильный порядок действий:

Затем возьмите медную ленту и отрежьте 32 куска по 70мм длиной каждый и проденьте их в прямоугольные отверстия в только что склеенной части корпуса, приэтом куски должны торчать не менее 30мм с каждой стороны.

![Медные контакты]({{ site.baseurl }}images/illustrations/board-1.jpg)
![Медные контакты]({{ site.baseurl }}images/illustrations/board-2.jpg)

Закончив, склейте между собой уже подготовленные части платы управления: 1+2 с 3+4.

![Медные контакты]({{ site.baseurl }}images/illustrations/board-esploso.jpg)

После того как высохнет клей, поместите в маленькие отверстия магниты. Переверните верхнюю часть корпуса и вставьте магниты в отверстия, проверьте, что их полюса ориентированы одинаково, не важно, северным или южным. Запечатайте отверстия каплями горячего клея.

Перейдём к электронной начинке. Начните с шин (дорожек) для "+5 вольт" (5V) и "земли" (GND) вдоль рядов отверстий, как на картинке. В самом первом Прототипе не было медных лент, зато были провода (которые также, если хотите, можно использовать), но в этом образце мы решили использовать для дорожек медную ленту. По-настоящему экономит время. Кроме того, так легче делать соединения.

![Шина питания]({{ site.baseurl }}images/illustrations/board-3.jpg)

На следующем шаге подключите один из двух контактов каждого отверстия к шине "земля"(GND). Если использовалась медная лента, можно оставить чуть длиннее и тем самым соединить оба конца.

![Шина питания с подключенными контактами]({{ site.baseurl }}images/illustrations/board-5.jpg)

Теперь нам нужно соединить вторые контакты с 5V-шиной, но на этот раз через резистор 10KΩ. Преимущество медной ленты в том, что к ней очень хорошо пристаёт припой. Вот как это делалось нами:

![Припайка резистора 10KΩ]({{ site.baseurl }}images/photo/diy-docs-1.jpg)

В результате должно выйти наподобие данной схемы:

![Схема с 10KΩ резисторами]({{ site.baseurl }}images/illustrations/board-6.jpg)

Настало время установить светодиоды; вставьте по красному светодиоду в каждое из 16 отверстий, а затем запечатайте их в древесине с помощью капель горячего клея. Как только клей остынет, их нужно будет подключить. Имейте в виду, что у светодиодов есть полярность: длинный вывод - анод, короткий - катод. Подключите каждый катод к шине "земля" через резистор 220Ω.

![Маркировка светодиода]({{ site.baseurl }}images/photo/diy-docs-6.jpg)

Подключите каждый катод к шине "земля" через резистор 220Ω.

![Схема подключения катодов]({{ site.baseurl }}images/illustrations/board-7.jpg)

Длинная ножка светодиода должна быть подключена к цифровому выходу  Arduino Mega , эти выходы пронумерованы от 22 до 53. Проще подключить светодиоды по порядку, так будет намного легче обращаться к ним в коде. Например, в своём Прототипе я использовал выходы с 30 до 45 (всего 16 светодиодов).
Номер начального выхода не так важен, если потом они заняты последовательно, без пропуска. Это значит, что если первый светодиод присоединён к  30-ому выходу, второй к 31-ому, третий к 32-ому и так далее, то шестнадцатый обязательно будет присоединён к разъёму 45.

Провода припаиваются к двухрядному разъёму (типа "папа"), т.к. цифровые выходы у Arduino Mega расположены в два ряда. Так проще подключить/отключить плату от Arduino.

![Разъём]({{ site.baseurl }}images/photo/diy-docs-4.jpg)

Когда вы закончите припаявать светодиоды, нужно будет подключить самодельные контакты. Их присоединяют к аналоговым входам Arduino Mega, чтобы считывать различные значения сопротивлений. Как и светодиоды, они должны быть подключены последовательно, начиная с A0 для контакта под номером 1 до A15 для 16-го контакта. Провод нужно подключать к тому контакту, куда мы припаивали резисторы 10 кΩ. Посмотрите на рисунок:

![присоединение аналоговых входов]({{ site.baseurl }}images/illustrations/board-8.jpg)

<div class="cf">
<img class="float cf" src="{{ site.baseurl }}images/illustrations/button.jpg">

<p>
Здесь я использовал однорядные разъёмы типа "папа", потому  аналоговые входы располагались в один ряд.

</p>

<p>
Последнее, что нам осталось подключить, это кнопка: припаяйте к обоим контактам провода, затем проденьте их в отверстие для кнопки, последнюю вставьте на место до упора. Теперь переверните плату: из отверстия должны торчать два провода. Подключите их как на рисунке: один к 5V, другой к "земле" через резистор 10KΩ. Вывод кнопки, соединённый с резистором, подключите к цифровому входу Arduino, мы, например, для этого использовали вход под номером 50.
</p>
</div>


![Подключение кнопки]({{ site.baseurl }}images/photo/diy-docs-5.jpg)

Мы почти закончили с платой, осталось лишь подключить Wireless Shield (плату расширения для модулей беспроводной связи), вставив соответствующие контакты в разъёмы Arduino Mega. Напомним, что мы уже заняли контакты от 30 до 45 - места для светодиодов, входы А0 до А15  для контактов и 50-ый выход на кнопку. Используйте для подключения платы расширения входы от  А0 до А5 и первые пять контактов. Не забудьте подсоединить "землю" к шине "земля", а контакт 5V с 5V-шиной.

![Контакты платы]({{ site.baseurl }}images/photo/diy-docs-3.jpg)

Теперь финальные штрихи: после того, как окрасите деталь 12, склейте её с деталью 13 наверху корпуса.

Аналогично с красной кнопкой: после окраски детали 14, поместите что-либо мягкое, вроде картонной прокладки, на деталь 2 вокруг кнопки, затем капните горячим клеем на неё и, прежде чем клей остынет, разместите шляпку красной кнопки. Смотрите рисунок:

![Монтаж красной кнопки]({{ site.baseurl }}images/illustrations/button-mechanics.jpg)

### Командные блоки

В разобранном виде командный блок выглядит так:

<img class="float cf" src="{{ site.baseurl }}images/illustrations/instruction-esploso.jpg">

Чтобы сделать блоки управления, сначала придётся вырезать детали: для первого файла понадобится фанера толщиной 4мм, для второго - 1мм. Блоки собираются из четырёх слоёв, пронумерованных от 1 до 4, и, согласно  схеме, всего делается 16 блоков: по четыре каждого типа.

В разных типах блоков установлены разные резисторы. Ниже представлено, какие номиналы использовались в нашем Прототипе:

ВПЕРЁД: 4.7K Ω<br>
НАЛЕВО: 100K Ω<br>
НАПРАВО: 220 Ω<br>
ФУНКЦИЯ: 10K Ω

Чтобы сделать блоки управления, сначала надо склеить детали 3 и 4.

Когда клей высохнет, можно приступать к окраске. На нижеприведённом рисунке показано, как должны быть окрашены детали:

![рисунок]({{ site.baseurl }}images/illustrations/colors.jpg)

Теперь нужно отрезать два куска медной ленты по 40мм длиной каждый. Проденьте их в щели двух только скленных деталей и загните в кольца, которые должны получиться достаточно тугими.

![рисунок]({{ site.baseurl }}images/illustrations/instruction-block-guide.jpg)

После поместите в отверстие магнит. Вставляя, убедитесь, что ПРАВИЛЬНО СОБЛЮДЕНА ПОЛЯРНОСТЬ МАГНИТА, так, чтобы блок "лип" к плате. Если вы вставили обратной стороной, то он будет отталкиваться от другого магнита - забавный результат, но не тот, который нужен.

Закрепите магнит с каплей горячего клея и, пока клей не остыл, поместите сверху резистор, с ножками, лежащими на медной ленте (на контактных площадках). После этого припаяйте резистор к контактам. После пайки откусите лишние ножки и приклейте поверх резистора деталь номер 2.

Завершите сборку блока приклеиванием последнего слоя, части 1, сверху, а затем повторите процесс для каждого блока :)

### КУБЕТТО

Электроника:

Прототип Кубетто может быть собран как с Arduino Uno, так и с Leonardo, с установленной сверху Proto Wireless Shield. Плата расширения нужна, поскольку на ней есть область моделирования, достаточно большая, чтобы подключить контроллер двигателей, разъёмы оптических датчиков, самих двигателей и питания.

Кубетто должен поворачиваться на 90 градусов направо и столько же налево. Использование таймера было бы не совсем точным, например, поворот направо на одну секунду даст более-менее одинаковый результат в разных условиях. "Более или менее" - потому что результат зависит от многих факторов: поверхность пола, уровень заряда батареи и т.д. Я решил данную проблему подсчётом количества шагов угла поворота колесика с помощью двух оптических датчиков CNY70 в сочетании с полосатой наклейкой на колесе. Круглая наклейка размещается на внутренней части колеса и выглядит примерно так:

![Наклейка на колесо]({{ site.baseurl }}images/photo/diy-docs-14.jpg)

Наклейка поделена на чёрные и белые сегменты, потому что CNY70 способен различать между собой эти два цвета. Внутри установлен постоянно горящий инфракрасный светодиод и фототранзистор, считывающий яркость отраженного инфракрасного света. Когда перед датчиком находится чёрный материал, свет практически не отражается, т.к. чёрный, как правило, способствует его поглощению. Наоборот, если же материал был белым, то свет отражается полностью, поэтому считываемая датчиком величина очень высока. Разница между показаниями используется для подсчёта шагов угла поворота колеса.

![Чёрный поглощает свет, белый отражает свет]({{ site.baseurl }}images/illustrations/cny70-physycs.jpg)

В зоне моделирования платы раширения Wireless Proto Shield распаяны разъёмы для контроллера двигателей и других деталей. Для подключения просто соедините гнездовые разъёмы "мама" на дополнительных модулях с соответствующими штырьковыми разъёмами "папа" на плате расширения.

![рисунок]({{ site.baseurl }}images/illustrations/wireless-shield-connections.jpg)

Я использовал для подключения обычные разъёмы типа "папа" и типа "мама" на подключаемых модулях.

![рисунок]({{ site.baseurl }}images/photo/diy-docs-12.jpg)

![рисунок]({{ site.baseurl }}images/illustrations/wireless-shield-connections-1.jpg)

Микросхема контроллера двигателей SN754410 имеет 16 выходов, которые должны быть подключены по следующей схеме:

![рисунок]({{ site.baseurl }}images/illustrations/motor-driver.jpg)

Схема подключения CNY70 :

<img style="width:50%" src="{{ site.baseurl }}images/illustrations/cny70-wiring.jpg">

Корпус:

Начните с вырезания лазером файла cubetto.dxf. Все части Кубетто вырезаются из фанеры толщиной 4мм, для сборки корпуса используйте представленную ниже схему:

![рисунок]({{ site.baseurl }}images/illustrations/cubetto-guide.jpg)

Не спешите с закреплением двигателей, сначала вы должны установить ролик.

![рисунок]({{ site.baseurl }}images/illustrations/ball-caster.jpg)

![рисунок]({{ site.baseurl }}images/photo/diy-docs-9.jpg)

Теперь CNY70. Спаяйте проводом два противоположных вывода, которые должны быть подключены к 5V. Затем припаяйте оставшиеся три провода к оставшимся выводам CNY70. Их концы припаяйте к блоку разъёмов типа "мама". Позднее они будут подключены к разъёмам "папа" на Proto Shield.

Оба датчика CNY70 размещаются рядом с краем нижней платы, светодиот и транзистор ставят горизонтально в направлении колеса. Для их закрепления используйте немного горячего(или какого-то другого) клея .

Чтобы понять, что и где должно быть расположено, взгляните на фотографию:

![рисунок]({{ site.baseurl }}images/photo/diy-docs-11.jpg)

Так же, как у CNY70, припаяйте два провода к небольшим лепесткам, выступающим из каждого моторчика. Можно перекрутить провода, чтобы сделать их более жёсткими, затем с другого конца припаяйте двухконтактный разъём типа "мама", как на иллюстрации.

Теперь распечатайте внутренние изображения с чёрными и белыми сегментами и приклейте их на картон (или вырезанную лазером/лобзиком фанеру, как будет удобней), обрежьте по периметру и проделайте отверстие в середине, чтобы вставить деталь между двигателем и колесом. Чёрно-белые сегменты нужно повернуть внутрь Кубетто, расстояние между изображениями и CNY70 должно составлять от 1мм до 3мм, чтобы датчик смог правильно работать.

![рисунок]({{ site.baseurl }}images/photo/diy-docs-10.jpg)

Теперь можно закрепить колёса на моторчиках; если использовались колёсики от Solarbotics, закрепите их идущим в комплекте винтом, но не затягивайте слишком сильно.

Склейте вместе три из четырёх стенок корпуса Кубетто (детали 5,7 и 8). 	Заднюю панель мы оставим съёмной, на случай, если захотим что-либо переделать или добавить.

Возьмите блок с батарейками или аккумуляторами и припаяйте чёрный и красный провода к двум разъёмам типа "мама". Разъём на Proto Shield пойдёт на питание и "землю". Настоятельно рекомендуем установить выключатель, размыкающий красный провод.

![рисунок]({{ site.baseurl }}images/photo/diy-docs-13.jpg)

Теперь можно разместить Arduino, соединённый с модулем Proto, над моторчиками. Подключите все разъёмы, и на этом вы закончите сборку Кубетто.</div>

## Arduino

### [Скачать файлы Arduino](https://github.com/primo-io/arduino-sketches/raw/master/primo-prototype-arduino.zip)

Инструкции в комментариях к чертежам.
